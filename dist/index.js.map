{"version":3,"file":"index.js","names":["EQUALS","EQ","GREATER","GT","GREATER_OR_EQUALS","GTE","LESS","LT","LESS_OR_EQUALS","LTE","NOT_EQUALS","NE","BETWEEN","AND","Consts","SQLObject","Conditions","args","arg","push","length","Disjunction","map","join","Conjunction","s","toString","Condition","column","operator","value","quoteTerm","quoteVal","Negation","InclusionOperator","inclusionType","Array","isArray","val","In","NotIn","GlobalNotIn","GlobalIn","Between","leftBoundary","rightBoundary","b","quoteBoundary","Operators","createCondition","Error","commonReplacer","console","error","Value","replace","Term","term","parts","split","Number","isFinite","SQLFunction","name","_curry_f","AggregateFunctions","count","countIf","any","anyLast","min","max","sum","sumIf","avg","avgIf","uniq","uniqCombined","uniqHLL12","uniqExact","groupArray","groupUniqArray","ArithmeticFunctions","plus","minus","multiply","divide","intDiv","intDivOrZero","modulo","negate","abs","TimeFunctions","toYear","toMonth","toDayOfMonth","toDayOfWeek","toHour","toMinute","toTime","toDate","toDateTime","toDateTime64","toStartOfDay","toStartOfMonth","toStartOfQuarter","toStartOfYear","toStartOfMinute","toStartOfFiveMinute","toStartOfHour","now","today","yesterday","IPAddrFunctions","toIPv4","toIPv6","IPv4NumToString","IPv4StringToNum","IPv4NumToStringClassC","IPv6NumToString","IPv6StringToNum","Raw","string","raw","Query","Select","tables","joins","conditions","having_conditions","preconditions","aggregations","select_list","order_expressions","request_totals","undefined","sampling","limits","limitbycolumns","fmt","columns","forEach","col","table","alias","Object","values","keys","type","condition","aggregateExpressions","a","number","offset","limit","expressions","e","c","from","prewhere","where","groupby","having","order_by","with_totals","sample","limitby","format","toUpperCase","filter","v","Queries","Utility","Shortcuts","And","Or","Eq","Ne","Gte","Lte","Lt","Gt","notIn","cast","thing","t","between","left","right","Dialect"],"sources":["../src/index.js"],"sourcesContent":["const EQUALS = \"=\";\nconst EQ = EQUALS;\nconst GREATER = \">\";\nconst GT = GREATER;\nconst GREATER_OR_EQUALS = \">=\";\nconst GTE = GREATER_OR_EQUALS;\nconst LESS = \"<\";\nconst LT = LESS;\nconst LESS_OR_EQUALS = \"<=\";\nconst LTE = LESS_OR_EQUALS;\nconst NOT_EQUALS = \"!=\";\nconst NE = NOT_EQUALS;\nconst BETWEEN = \"between\";\nconst AND = 'and'\n\nconst Consts = {\n  EQUALS,\n  GREATER,\n  GREATER_OR_EQUALS,\n  LESS,\n  LESS_OR_EQUALS,\n  NOT_EQUALS,\n  EQ,\n  GT,\n  GTE,\n  LT,\n  LTE,\n  NE,\n};\n\nclass SQLObject {\n}\n\nclass Conditions extends SQLObject {\n  constructor(...args) {\n    super();\n    this.args = args;\n  }\n\n  push(arg) {\n    this.args.push(arg);\n  }\n\n  get length() {\n    return this.args.length;\n  }\n}\n\nclass Disjunction extends Conditions {\n  constructor(...args) {\n    super(...args);\n  }\n\n  toString() {\n    return this.args.length ? this.args.map(arg => \"(\" + arg + \")\").join(\" or \") : \"\";\n  }\n}\n\nclass Conjunction extends Conditions {\n  constructor(...args) {\n    super(...args);\n  }\n\n  toString() {\n    if (!this.args.length) return \"\";\n\n    return this.args.map((arg) => {\n      const s = (arg.toString) ? arg.toString() : arg;\n      return \"(\" + s + \")\";\n    }).join(\" and \");\n  }\n}\n\nclass Condition extends SQLObject {\n  constructor(column, operator, value) {\n    super();\n    this.column = quoteTerm(column);\n    this.operator = operator;\n    this.value = (value instanceof SQLObject) ? value : quoteVal(value);\n  }\n\n  toString() {\n    if (this.operator) {\n      return [this.column, this.operator, this.value].join(' ');\n    } else {\n      return this.column;\n    }\n  }\n}\n\nclass Negation extends Condition {\n  constructor(column, operator, value) {\n    super(column, operator, value);\n  }\n\n  toString() {\n    return \"not(\" + super.toString() + \")\";\n  }\n}\n\nclass InclusionOperator extends Condition {\n  constructor(inclusionType, column, operator, value) {\n    super(column, operator, value);\n    this.operator = inclusionType;\n  }\n\n  toString() {\n    return [\n      quoteTerm(this.column),\n      \" \",\n      this.operator,\n      \" (\",\n      Array.isArray(this.value)\n        ? this.value.map(val => quoteVal(val)).join(',')\n        : this.value,\n      \")\"\n    ].join('');\n  }\n}\n\nclass In extends InclusionOperator {\n  constructor(...args) {\n    super(\"in\", ...args);\n  }\n}\n\nclass NotIn extends InclusionOperator {\n  constructor(...args) {\n    super(\"not in\", ...args);\n  }\n}\n\nclass GlobalNotIn extends InclusionOperator {\n  constructor(...args) {\n    super(\"global not in\", ...args);\n  }\n}\n\nclass GlobalIn extends InclusionOperator {\n  constructor(...args) {\n    super(\"global in\", ...args);\n  }\n}\n\nclass Between extends SQLObject {\n  constructor(column, leftBoundary, rightBoundary) {\n      super();\n      this.column = column;\n\n      this.leftBoundary = leftBoundary;\n      this.rightBoundary = rightBoundary;\n  }\n  quoteBoundary(b) {\n    return b instanceof SQLObject ? b.toString() : quoteVal(b);\n  }\n\n  toString() {\n    return [\n      quoteTerm(this.column),\n      \" \",\n      BETWEEN,\n      // because super class adding parents around value and I didn't find an elegant\n      // way how to avoid this. So I'm overloading toString() and copy-pasting implementation\n      this.quoteBoundary(this.leftBoundary),\n      AND,\n      this.quoteBoundary(this.rightBoundary)\n    ].join(' ');\n  }\n}\n\nconst Operators = {\n  Conjunction, Disjunction, Negation,\n  In, NotIn, GlobalIn, GlobalNotIn\n};\n\nfunction createCondition(...args) {\n  switch (args.length) {\n    case 1:\n      return args[0] instanceof Condition ? args[0] : new Condition(args[0]);\n    case 2:\n      return new Condition(args[0], EQUALS, args[1]);\n    case 3:\n      return new Condition(...args);\n    default:\n      throw new Error(\"Invalid condition args: \", args);\n  }\n}\n\nlet commonReplacer = [\n  /[\\0\\n\\r\\b\\t\\\\\\x1a]/g, (s) => {\n    switch (s) {\n      case \"\\0\":\n        return \"\\\\0\";\n      case \"\\n\":\n        return \"\\\\n\";\n      case \"\\b\":\n        return \"\\\\b\";\n      case \"\\r\":\n        return \"\\\\r\";\n      case \"\\t\":\n        return \"\\\\t\";\n      case \"\\\\\":\n        return \"\\\\\\\\\";\n      case \"\\x1a\" :\n        return \"\\\\Z\";\n      default:\n        console.error(\"uncovered case in replacer:\", s); return ''; //logic error\n    }\n  }\n];\n\nclass Value extends SQLObject {\n  constructor(value) {\n    super();\n    this.value = value;\n  }\n\n  toString() {\n    if (typeof this.value === \"string\") {\n      return \"'\" + this.value.replace(...commonReplacer).replace(/'/g, \"''\") + \"'\";\n    }\n    if (typeof this.value === 'undefined') {\n      return \"''\";\n    }\n\n    if (Array.isArray(this.value)) {\n      return this.value.map(val => new Value(val)).join();\n    }\n\n    return this.value + '';\n  }\n}\n\nclass Term extends SQLObject {\n  constructor(term) {\n    super();\n    this.term = term;\n  }\n\n  toString() {\n    const parts = this.term.split('.');\n    if (parts.length > 1) {\n      return [new Term(parts[0]).toString(), new Term(parts[1]).toString()].join('.');\n    }\n\n    return '`' + this.term.replace(...commonReplacer).replace(/`/g, '\\\\`') + '`';\n  }\n}\n\nfunction quoteVal(value) {\n  return value instanceof SQLObject ? value : new Value(value);\n}\n\nfunction quoteTerm(term) {\n  return term instanceof SQLObject || Number.isFinite(term) ? term : new Term(term);\n}\n\n\nclass SQLFunction extends SQLObject {\n  constructor(name, ...args) {\n    super();\n    this.name = name;\n    this.args = args;\n  }\n\n  toString() {\n    return this.name +\n      \"(\" +\n      this.args.map((arg) => arg instanceof SQLObject || Number.isFinite(arg) ? arg : quoteTerm(arg)).join() +\n      \")\";\n  }\n}\n\nconst _curry_f = (name) => {\n  return (...args) => new SQLFunction(name, ...args)\n};\n\nconst AggregateFunctions = {\n  count: _curry_f('count'),\n  countIf: _curry_f('countIf'),\n  any: _curry_f('any'),\n  anyLast: _curry_f('anyLast'),\n  min: _curry_f('min'),\n  max: _curry_f('max'),\n  sum: _curry_f('sum'),\n  sumIf: _curry_f('sumIf'),\n  avg: _curry_f('avg'),\n  avgIf: _curry_f('avgIf'),\n  uniq: _curry_f('uniq'),\n  uniqCombined: _curry_f('uniqCombined'),\n  uniqHLL12: _curry_f('uniqHLL12'),\n  uniqExact: _curry_f('uniqExact'),\n  groupArray: _curry_f('groupArray'),\n  groupUniqArray: _curry_f('groupUniqArray')\n};\n\nconst ArithmeticFunctions = {\n  plus: _curry_f('plus'),\n  minus: _curry_f('minus'),\n  multiply: _curry_f('multiply'),\n  divide: _curry_f('divide'),\n  intDiv: _curry_f('intDiv'),\n  intDivOrZero: _curry_f('intDivOrZero'),\n  modulo: _curry_f('modulo'),\n  negate: _curry_f('negate'),\n  abs: _curry_f('abs')\n};\n\nconst TimeFunctions = {\n  toYear: _curry_f('toYear'),\n  toMonth: _curry_f('toMonth'),\n  toDayOfMonth: _curry_f('toDayOfMonth'),\n  toDayOfWeek: _curry_f('toDayOfWeek'),\n  toHour: _curry_f('toHour'),\n  toMinute: _curry_f('toMinute'),\n  toTime: _curry_f('toTime'),\n  toDate: _curry_f('toDate'),\n  toDateTime: _curry_f('toDateTime'),\n  toDateTime64: _curry_f('toDateTime64'),\n  toStartOfDay: _curry_f('toStartOfDay'),\n  toStartOfMonth: _curry_f('toStartOfMonth'),\n  toStartOfQuarter: _curry_f('toStartOfQuarter'),\n  toStartOfYear: _curry_f('toStartOfYear'),\n  toStartOfMinute: _curry_f('toStartOfMinute'),\n  toStartOfFiveMinute: _curry_f('toStartOfFiveMinute'),\n  toStartOfHour: _curry_f('toStartOfHour'),\n\n  now: _curry_f('now'),\n  today: _curry_f('today'),\n  yesterday: _curry_f('yesterday')\n};\n\nconst IPAddrFunctions = {\n  toIPv4: _curry_f('toIPv4'),\n  toIPv6: _curry_f('toIPv6'),\n  IPv4NumToString: _curry_f('IPv4NumToString'),\n  IPv4StringToNum: _curry_f('IPv4StringToNum'),\n  IPv4NumToStringClassC: _curry_f('IPv4NumToStringClassC'),\n  IPv6NumToString: _curry_f('IPv6NumToString'),\n  IPv6StringToNum: _curry_f('IPv6StringToNum')\n};\n\nclass Raw extends SQLObject {\n  constructor(string) {\n    super();\n    this.raw = string;\n  }\n\n  toString() {\n    return this.raw;\n  }\n}\n\nclass Query extends SQLObject {\n}\n\nclass Select extends Query {\n  constructor() {\n    super();\n\n    this.tables = [];\n    this.joins = [];\n    this.conditions = new Conjunction();\n    this.having_conditions = new Conjunction();\n    this.preconditions = new Conjunction();\n    this.aggregations = [];\n    this.select_list = [];\n    this.order_expressions = [];\n    this.request_totals = undefined;\n    this.sampling = undefined;\n    this.limits = undefined;\n    this.limitbycolumns = undefined;\n    this.fmt = undefined;\n  }\n\n  select(...columns) {\n    if (columns.length === 0) {\n      return this.select_list;\n    }\n\n    columns.forEach((col) => this.select_list.push(col));\n    return this;\n  }\n\n  /**\n   * @usage\n   *  q = selectBuilder->from('table0', ['table1', 'alias1'], { 'table2' : 'alias2'})->toString()\n   *  assertEquals(q, \"select * from table0, table1 as alias1, table2 as alias2\");\n   *\n   * @param tables\n   * @return {Select|Array}\n   */\n  from(...tables) {\n    if (!tables.length) {\n      return this.tables;\n    }\n\n    tables = tables.map(table => {\n      if (typeof table === \"string\") return [quoteTerm(table)];\n      if (Array.isArray(table)) {\n        if (table[0] instanceof Select) table[0] = '(' + table[0].toString() + ')';\n        else table[0] = quoteTerm(table[0]);\n        table[1] = quoteTerm(table[1]);\n        return table;\n      }\n      if (table instanceof Select) return ['(' + table.toString() + ')'];\n\n      let alias = Object.values(table)[0];\n      if (alias instanceof Select) alias = '(' + alias.toString() + ')';\n      else alias = quoteTerm(alias);\n\n      return [alias, quoteTerm(Object.keys(table)[0])];\n    });\n\n    this.tables = tables;\n    return this;\n  }\n\n  join(table, type, ...conditions) {\n    if (typeof table === \"string\") table = quoteTerm(table);\n\n    if (!Array.isArray(conditions)) {\n      conditions = [conditions];\n    }\n\n    if (conditions.length > 1) {\n      conditions = Conjunction(conditions);\n    }\n\n    this.joins.push({ table, type, conditions });\n    return this;\n  }\n\n  prewhere(...args) {\n    this.preconditions.push(createCondition(...args));\n    return this;\n  }\n\n  orPrewhere(...args) {\n    let condition = createCondition(...args);\n    if (this.preconditions.length) {\n      this.preconditions = new Disjunction(this.preconditions, condition)\n    } else {\n      this.preconditions.push(condition)\n    }\n\n    return this;\n  }\n\n  where(...args) {\n    if (args.length === 1 && args[0] instanceof Condition) {\n      this.conditions.push(args[0]);\n    } else {\n      this.conditions.push(createCondition(...args));\n    }\n    return this;\n  }\n\n  orWhere(...args) {\n    let condition = createCondition(...args);\n    if (this.conditions.length) {\n      this.conditions = new Disjunction(this.conditions, condition)\n    } else {\n      this.conditions.push(condition);\n    }\n\n    return this;\n  }\n\n  groupBy(...aggregateExpressions) {\n    aggregateExpressions.forEach(a => this.aggregations.push(a));\n    return this;\n  }\n\n  withTotals(request_totals = true) {\n    this.request_totals = request_totals;\n    return this;\n  }\n\n  limit(number, offset) {\n    this.limits = {\n      number, offset\n    };\n    return this;\n  }\n\n  limitBy(limit, ...columns) {\n    this.limitbycolumns = {\n      limit, columns\n    };\n    return this;\n  }\n\n  orderBy(...expressions) {\n    expressions.forEach(e => this.order_expressions.push(e));\n    return this;\n  }\n\n  format(fmt) {\n    this.fmt = fmt;\n    return this;\n  }\n\n  toString() {\n    let select_list;\n    if (this.select_list.length === 0) {\n      select_list = \"*\";\n    } else {\n      select_list = this.select_list.map(\n        c => Array.isArray(c)\n          ? quoteTerm(c[0]) + ' as ' + quoteTerm(c[1])\n          : quoteTerm(c)\n      ).join();\n    }\n\n    let from = this.from().map(\n      (table) =>\n        table.length === 1\n          ? table[0]\n          : table[0] + ' as ' + table[1]\n    );\n    from = from.length ? \"from \" + from.join() : \"\";\n\n    let join = this.joins.map((join) => {\n      return ((join.type) ? join.type + ' ' : '') + 'join ' + join.table + ' on ' + join.conditions;\n    }).join(' ');\n\n    let prewhere = this.preconditions.length ? \"prewhere \" + this.preconditions : \"\";\n    let where = this.conditions.length ? \"where \" + this.conditions : \"\";\n\n    let groupby = this.aggregations.length\n      ? \"group by \" + this.aggregations.map(c => quoteTerm(c)).join()\n      : \"\";\n\n    let having = this.having_conditions.length ? \"having \" + this.having_conditions : \"\";\n\n    let order_by = this.order_expressions.length\n      ? \"order by \" + this.order_expressions.map(e => Array.isArray(e) ? quoteTerm(e[0]) + \" \" + e[1] : quoteTerm(e)).join()\n      : \"\";\n\n    let with_totals = this.request_totals ? \"with totals\" : \"\";\n    let sample = this.sampling ? \"sample \" + this.sampling : \"\";\n\n    let limitby = this.limitbycolumns && this.limitbycolumns.columns.length\n      ? \"limit \" + this.limitbycolumns.limit + \" by \" + this.limitbycolumns.columns.map(c => quoteTerm(c)).join()\n      : '';\n\n\n    let limit = this.limits\n      ? \"limit \" + ((typeof this.limits.offset === \"undefined\") ? this.limits.number : this.limits.offset + \", \" + this.limits.number)\n      : '';\n\n    let format = this.fmt\n      ? \" format \" + this.fmt.toUpperCase()\n      : \"\";\n\n    const parts = [\n      \"select\",\n      select_list,\n      from,\n      join,\n      sample,\n      prewhere,\n      where,\n      groupby,\n      with_totals,\n      having,\n      order_by,\n      limitby,\n      limit,\n      format,\n    ].filter((v) => v != '');\n\n    return parts.join(' ');\n  }\n}\n\n\nconst Queries = {\n  Select\n};\n\n\nconst Utility = {\n  quoteVal, val: quoteVal,\n  quoteTerm, term: quoteTerm,\n  raw: (s) => new Raw(s),\n  Condition: (...args) => new Condition(...args),\n};\n\n\nconst Shortcuts = {\n  And: (...args) => new Conjunction(...args),\n  Or: (...args) => new Disjunction(...args),\n  Eq: (col, val) => new Condition(col, Consts.EQ, val),\n  Ne: (col, val) => new Condition(col, Consts.NE, val),\n  Gte: (col, val) => new Condition(col, Consts.GTE, val),\n  Lte: (col, val) => new Condition(col, Consts.LTE, val),\n  Lt: (col, val) => new Condition(col, Consts.LT, val),\n  Gt: (col, val) => new Condition(col, Consts.GT, val),\n  in: (col, values) => new In(col, null, values),\n  notIn: (col, values) => new NotIn(col, null, values),\n  cast: (thing, t) => new SQLFunction('cast', thing, quoteVal(t)),\n  between: (col, left, right) => new Between(col, left, right)\n};\n\n\nconst Dialect = {\n  ...Operators,\n  ...AggregateFunctions,\n  ...ArithmeticFunctions,\n  ...TimeFunctions,\n  ...IPAddrFunctions,\n  ...Consts,\n  ...Queries,\n  ...Utility,\n  ...Shortcuts,\n};\nexport default Dialect;\n"],"mappings":"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"}